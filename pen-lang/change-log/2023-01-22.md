# Progress report in the Pen programming language

[@raviqqe](https://github.com/raviqqe)

---

# Progress report

---

# `keys` and `values` built-in functions

- `keys` function returns keys of a map.
- `values` function returns values of a map.
- The order of keys and values are consistennt among different instances of maps.
  - As long as their entries are the same.

```pen
xs = {string: number "foo": 1, "bar": 2}

keys(xs) == [string "bar", "foo"]
values(xs) == [number 2, 1]
```

---

# Parallel list comprehension

- Natural extension to list comprehension for `zip`-ish computation
- Not related to parallel computation

## In Haskell

```haskell
[x + y | x <- xs | y <- ys]
```

## In Pen

```pen
[number x() + y() for x, y in xs, ys]
```

---

# Use cases

## Zipping

```pen
String'Join(
  [string
    encodeString(k()) + ":" + encodeValue(v())
    for k, v in keys(xs), values(xs)
  ],
  ",",
)
```

---

# Use cases

## Enumeration of list elements

- Example: SQL query placeholders
- Lists in Pen are lazy.

```pen
" where "
  + String'Join(
    [string
      field() + " = $" + Number'String(index())
      for field, index in whereFields, Number'Sequence(Number'Infinity())
    ],
    " and ",
  )
```

---

# Future work

- More little language features
  - `sort` built-in function
- Code generator
  - For meta-programming
- Language server

---

# Summary

- Now, Pen has parallel list comprehension for `zip`-ish composition of lists.
