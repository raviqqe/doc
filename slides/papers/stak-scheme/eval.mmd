flowchart LR
  d0[source code] -.-> c1

  subgraph s0[compiler]
    c1[parse] -- S-expression --> c2

    subgraph s1[compile]
      c2[library expansion] --> c3[macro expansion] --> c4[compile]
    end

    c4 --> c5[encode]
  end

  c5 -.-> d1[bytecode]

  s1 --> s2

  subgraph s2[source code]
    foo
  end
